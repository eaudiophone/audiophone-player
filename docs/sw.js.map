{
  "version": 3,
  "sources": ["../src/sw.js"],
  "sourcesContent": ["const APP_SHELL = {\n    CACHE_NAME: 'cache-v.0.6.1',\n    CACHE_STATIC: 'static-v.0.6.1',\n    CACHE_DYNAMIC: 'dynamic-v.0.6.1',\n    CACHE_INMUTABLE: 'inmutable-v.0.6.1',\n};\n\n/** estructura de la pagina 404 */\nconst offlinePage = (`\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Offline - Necesitas conexion</title>\n</head>\n<style>\n    :root {\n        --background: #000;\n        --foreground: #fff;\n        --borders: #3c3c3c;\n        --background-form: rgba(136, 136, 136, .5);\n        --color-indicators: #f50;\n    }\n    \n    body {\n        font-family: sans-serif;\n        background-color: var(--background);\n        color: var(--foreground);\n        margin: 0;\n        overflow-x: hidden;\n        height: 100vh;\n    }\n\n    .h-full {\n        height: inherit;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    }\n\n    .button-offline {\n        padding: 12px 24px;\n        color: var(--foreground);\n        background-color: var(--color-indicators);\n        border: none;\n        outline: none;\n        cursor: pointer;\n        font-size: 1rem;\n    }\n</style>\n<body>\n    <div class=\"h-full\">\n        <h1>Sin conexion</h1>\n        <h3>Necesitas conexion a internet para continuar</h3>\n        <button onclick=\"window.location.reload();\" class=\"button-offline\">Recargar</button>\n    </div>\n</body>\n</html>     \n`);\n\n// SW\nself.addEventListener('install', event => {\n    console.info('installation SW');\n\n    const cacheStaticPromise = caches.open(APP_SHELL.CACHE_STATIC)\n        .then(cache => {\n            const files = [\n                './', \n                './index.html', \n                './index.css',\n                './mobile.css', \n                './index.js',\n                './img/note-double.svg',\n                './img/user.svg',\n                './img/home.svg',\n                './img/music-note.svg',\n                './img/play.svg',\n                './img/prev.svg',\n                './img/next.svg',\n                './img/sound-loud.svg',\n                './img/pause.svg',\n                './manifest.json'\n            ];\n\n            return cache.addAll(files);\n        });\n\n    const cacheInmutablePromise = caches.open(APP_SHELL.CACHE_INMUTABLE)\n        .then(cache => {\n            const files = [\n                './js/howler.min.js',\n                './js/zustand.js',\n                './fonts/Roboto-Bold.ttf',\n                './fonts/Roboto-Regular.ttf'\n            ];\n\n            return cache.addAll(files);\n        });\n\n    event.waitUntil(Promise.all([cacheStaticPromise, cacheInmutablePromise]));\n});\n\nself.addEventListener('fetch', event => {\n    console.info('cache with network fallback');\n   \n    const cacheNetwork = caches.match(event.request)\n        .then(cacheResponse => {\n            if (cacheResponse && cacheResponse.ok) return cacheResponse;\n\n            // sino existe la respuesta busca en la red\n            console.info('go to web');\n            \n            return fetch(event.request)\n                .then(webResponse => {\n                    caches.open(APP_SHELL.CACHE_DYNAMIC)\n                        .then(cache => {\n                            cache.put(event.request, webResponse)\n                        });\n                    \n                    // debemos retornar una copia de la peticion\n                    return webResponse.clone();\n                })\n                .catch(() => {\n                    const offlineResponse = new Response(\n                        offlinePage, \n                        { headers: {'Content-Type': 'text/html'}}\n                    );\n\n                    return offlineResponse                    \n                }); \n        });\n\n    event.respondWith(cacheNetwork);\n});"],
  "mappings": "MAAA,IAAMA,EAAY,CACd,WAAY,gBACZ,aAAc,iBACd,cAAe,kBACf,gBAAiB,mBACrB,EAGMC,EAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAuDrB,KAAK,iBAAiB,UAAWC,GAAS,CACtC,QAAQ,KAAK,iBAAiB,EAE9B,IAAMC,EAAqB,OAAO,KAAKH,EAAU,YAAY,EACxD,KAAKI,GAAS,CACX,IAAMC,EAAQ,CACV,KACA,eACA,cACA,eACA,aACA,wBACA,iBACA,iBACA,uBACA,iBACA,iBACA,iBACA,uBACA,kBACA,iBACJ,EAEA,OAAOD,EAAM,OAAOC,CAAK,CAC7B,CAAC,EAECC,EAAwB,OAAO,KAAKN,EAAU,eAAe,EAC9D,KAAKI,GAAS,CACX,IAAMC,EAAQ,CACV,qBACA,kBACA,0BACA,4BACJ,EAEA,OAAOD,EAAM,OAAOC,CAAK,CAC7B,CAAC,EAELH,EAAM,UAAU,QAAQ,IAAI,CAACC,EAAoBG,CAAqB,CAAC,CAAC,CAC5E,CAAC,EAED,KAAK,iBAAiB,QAASJ,GAAS,CACpC,QAAQ,KAAK,6BAA6B,EAE1C,IAAMK,EAAe,OAAO,MAAML,EAAM,OAAO,EAC1C,KAAKM,GACEA,GAAiBA,EAAc,GAAWA,GAG9C,QAAQ,KAAK,WAAW,EAEjB,MAAMN,EAAM,OAAO,EACrB,KAAKO,IACF,OAAO,KAAKT,EAAU,aAAa,EAC9B,KAAKI,GAAS,CACXA,EAAM,IAAIF,EAAM,QAASO,CAAW,CACxC,CAAC,EAGEA,EAAY,MAAM,EAC5B,EACA,MAAM,IACqB,IAAI,SACxBR,EACA,CAAE,QAAS,CAAC,eAAgB,WAAW,CAAC,CAC5C,CAGH,EACR,EAELC,EAAM,YAAYK,CAAY,CAClC,CAAC",
  "names": ["APP_SHELL", "offlinePage", "event", "cacheStaticPromise", "cache", "files", "cacheInmutablePromise", "cacheNetwork", "cacheResponse", "webResponse"]
}
